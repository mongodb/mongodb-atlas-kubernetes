
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.3.0
  creationTimestamp: null
  name: atlasclusters.atlas.mongodb.com
spec:
  group: atlas.mongodb.com
  names:
    kind: AtlasCluster
    listKind: AtlasClusterList
    plural: atlasclusters
    singular: atlascluster
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: AtlasCluster is the Schema for the atlasclusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AtlasClusterSpec defines the desired state of AtlasCluster
            properties:
              autoScaling:
                description: Collection of settings that configures auto-scaling information
                  for the cluster. If you specify the autoScaling object, you must
                  also specify the providerSettings.autoScaling object.
                properties:
                  compute:
                    description: Collection of settings that configure how a cluster
                      might scale its cluster tier and whether the cluster can scale
                      down.
                    properties:
                      enabled:
                        description: Flag that indicates whether cluster tier auto-scaling
                          is enabled. The default is false.
                        type: boolean
                      maxInstanceSize:
                        description: 'Maximum instance size to which your cluster
                          can automatically scale (such as M40). Atlas requires this
                          parameter if "autoScaling.compute.enabled" : true.'
                        type: string
                      minInstanceSize:
                        description: 'Minimum instance size to which your cluster
                          can automatically scale (such as M10). Atlas requires this
                          parameter if "autoScaling.compute.scaleDownEnabled" : true.'
                        type: string
                      scaleDownEnabled:
                        description: 'Flag that indicates whether the cluster tier
                          may scale down. Atlas requires this parameter if "autoScaling.compute.enabled"
                          : true.'
                        type: boolean
                    type: object
                  diskGBEnabled:
                    description: Flag that indicates whether disk auto-scaling is
                      enabled. The default is true.
                    type: boolean
                type: object
              backupEnabled:
                description: 'Deprecated: do not use. Flag that indicates whether
                  legacy backups have been enabled. Applicable only for M10+ clusters.'
                type: boolean
              biConnector:
                description: Configuration of BI Connector for Atlas on this cluster.
                  The MongoDB Connector for Business Intelligence for Atlas (BI Connector)
                  is only available for M10 and larger clusters.
                properties:
                  enabled:
                    description: Flag that indicates whether or not BI Connector for
                      Atlas is enabled on the cluster.
                    type: boolean
                  readPreference:
                    description: Source from which the BI Connector for Atlas reads
                      data. Each BI Connector for Atlas read preference contains a
                      distinct combination of readPreference and readPreferenceTags
                      options.
                    type: string
                type: object
              clusterType:
                description: Type of the cluster that you want to create.
                enum:
                - REPLICASET
                - SHARDED
                - GEOSHARDED
                type: string
              connectionSecretRef:
                description: ConnectionSecret is the name of the Kubernetes Secret
                  which contains the information about the way to connect to Atlas
                  (organization ID, API keys). The default Operator connection configuration
                  will be used if not provided.
                properties:
                  name:
                    description: Name is the name of the Kubernetes Secret
                    type: string
                required:
                - name
                type: object
              diskSizeGB:
                description: Capacity, in gigabytes, of the host's root volume. Increase
                  this number to add capacity, up to a maximum possible value of 4096
                  (i.e., 4 TB). This value must be a positive integer.
                maximum: 4096
                minimum: 0
                type: integer
              encryptionAtRestProvider:
                description: Cloud service provider that offers Encryption at Rest.
                type: string
              labels:
                description: Collection of key-value pairs that tag and categorize
                  the cluster. Each key and value has a maximum length of 255 characters.
                items:
                  description: LabelSpec contains key-value pairs that tag and categorize
                    the Cluster/DBUser
                  properties:
                    key:
                      type: string
                    value:
                      type: string
                  type: object
                type: array
              mongoDBMajorVersion:
                description: Version of the cluster to deploy.
                enum:
                - "3.6"
                - "4.0"
                - "4.2"
                - "4.4"
                type: string
              name:
                description: Name of the cluster as it appears in Atlas. After Atlas
                  creates the cluster, you can't change its name.
                type: string
              numShards:
                description: Positive integer that specifies the number of shards
                  to deploy for a sharded cluster.
                maximum: 50
                minimum: 1
                type: integer
              pitEnabled:
                description: Flag that indicates the cluster uses continuous cloud
                  backups.
                type: boolean
              providerBackupEnabled:
                description: Applicable only for M10+ clusters. Flag that indicates
                  if the cluster uses Cloud Backups for backups.
                type: boolean
              providerSettings:
                description: Configuration for the provisioned hosts on which MongoDB
                  runs. The available options are specific to the cloud service provider.
                properties:
                  autoScaling:
                    description: Range of instance sizes to which your cluster can
                      scale.
                    properties:
                      compute:
                        description: Collection of settings that configure how a cluster
                          might scale its cluster tier and whether the cluster can
                          scale down.
                        properties:
                          enabled:
                            description: Flag that indicates whether cluster tier
                              auto-scaling is enabled. The default is false.
                            type: boolean
                          maxInstanceSize:
                            description: 'Maximum instance size to which your cluster
                              can automatically scale (such as M40). Atlas requires
                              this parameter if "autoScaling.compute.enabled" : true.'
                            type: string
                          minInstanceSize:
                            description: 'Minimum instance size to which your cluster
                              can automatically scale (such as M10). Atlas requires
                              this parameter if "autoScaling.compute.scaleDownEnabled"
                              : true.'
                            type: string
                          scaleDownEnabled:
                            description: 'Flag that indicates whether the cluster
                              tier may scale down. Atlas requires this parameter if
                              "autoScaling.compute.enabled" : true.'
                            type: boolean
                        type: object
                      diskGBEnabled:
                        description: Flag that indicates whether disk auto-scaling
                          is enabled. The default is true.
                        type: boolean
                    type: object
                  backingProviderName:
                    description: 'Cloud service provider on which the host for a multi-tenant
                      cluster is provisioned. This setting only works when "providerSetting.providerName"
                      : "TENANT" and "providerSetting.instanceSizeName" : M2 or M5.'
                    enum:
                    - AWS
                    - GCP
                    - AZURE
                    type: string
                  diskIOPS:
                    description: Disk IOPS setting for AWS storage. Set only if you
                      selected AWS as your cloud service provider.
                    format: int64
                    type: integer
                  diskTypeName:
                    description: Type of disk if you selected Azure as your cloud
                      service provider.
                    type: string
                  encryptEBSVolume:
                    description: Flag that indicates whether the Amazon EBS encryption
                      feature encrypts the host's root volume for both data at rest
                      within the volume and for data moving between the volume and
                      the cluster.
                    type: boolean
                  instanceSizeName:
                    description: Atlas provides different cluster tiers, each with
                      a default storage capacity and RAM size. The cluster you select
                      is used for all the data-bearing hosts in your cluster tier.
                    type: string
                  providerName:
                    description: Cloud service provider on which Atlas provisions
                      the hosts.
                    enum:
                    - AWS
                    - GCP
                    - AZURE
                    - TENANT
                    type: string
                  regionName:
                    description: Physical location of your MongoDB cluster. The region
                      you choose can affect network latency for clients accessing
                      your databases.
                    type: string
                  volumeType:
                    description: Disk IOPS setting for AWS storage. Set only if you
                      selected AWS as your cloud service provider.
                    enum:
                    - STANDARD
                    - PROVISIONED
                    type: string
                type: object
              replicationSpecs:
                description: Configuration for cluster regions.
                items:
                  description: ReplicationSpec represents a configuration for cluster
                    regions
                  properties:
                    numShards:
                      description: Number of shards to deploy in each specified zone.
                        The default value is 1.
                      format: int64
                      type: integer
                    regionsConfig:
                      additionalProperties:
                        description: RegionsConfig describes the regionâ€™s priority
                          in elections and the number and type of MongoDB nodes Atlas
                          deploys to the region.
                        properties:
                          analyticsNodes:
                            description: The number of analytics nodes for Atlas to
                              deploy to the region. Analytics nodes are useful for
                              handling analytic data such as reporting queries from
                              BI Connector for Atlas. Analytics nodes are read-only,
                              and can never become the primary. If you do not specify
                              this option, no analytics nodes are deployed to the
                              region.
                            format: int64
                            type: integer
                          electableNodes:
                            description: Number of electable nodes for Atlas to deploy
                              to the region. Electable nodes can become the primary
                              and can facilitate local reads.
                            format: int64
                            type: integer
                          priority:
                            description: Election priority of the region. For regions
                              with only replicationSpecs[n].regionsConfig.<region>.readOnlyNodes,
                              set this value to 0.
                            format: int64
                            type: integer
                          readOnlyNodes:
                            description: Number of read-only nodes for Atlas to deploy
                              to the region. Read-only nodes can never become the
                              primary, but can facilitate local-reads.
                            format: int64
                            type: integer
                        type: object
                      description: Configuration for a region. Each regionsConfig
                        object describes the region's priority in elections and the
                        number and type of MongoDB nodes that Atlas deploys to the
                        region.
                      type: object
                    zoneName:
                      description: Name for the zone in a Global Cluster. Don't provide
                        this value if clusterType is not GEOSHARDED.
                      type: string
                  type: object
                type: array
            type: object
          status:
            description: AtlasClusterStatus defines the observed state of AtlasCluster.
            properties:
              groupId:
                type: string
              id:
                type: string
              stateName:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
