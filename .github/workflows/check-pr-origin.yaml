name: Check PR origin

on:
  workflow_call:
    outputs:
        pr-forked:
          description: "Is PR forked from another repository?"
          value: ${{ jobs.detect-pr-origin.outputs.forked }}

jobs:
    detect-pr-origin:
        runs-on: ubuntu-latest
        outputs:
            forked: ${{ steps.check.outputs.forked }}
        steps:
        - name: Check PR Origin
          id: check
          run: |
            if [ "${{ github.event.repository.full_name }}" == "${{ github.event.pull_request.head.repo.full_name }}" ]; then
              echo "This is a pull request from the same repository."
              echo "forked=false" >> "$GITHUB_OUTPUT"
            else
              echo "This is a pull request from a forked repository."
              echo "forked=true" >> "$GITHUB_OUTPUT"
            fi
        - name: forked
          id: forked
          if: steps.check.outputs.forked == 'true'
          run: echo "PR is forked"
