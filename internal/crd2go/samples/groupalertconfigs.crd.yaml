apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: groupalertsconfigs.atlas.generated.mongodb.com
spec:
  group: atlas.generated.mongodb.com
  names:
    categories:
    - atlas
    kind: GroupAlertsConfig
    listKind: GroupAlertsConfigList
    plural: groupalertsconfigs
    shortNames:
    - aga
    singular: groupalertsconfig
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: A groupalertsconfig, managed by the MongoDB Kubernetes Atlas
          Operator.
        properties:
          spec:
            description: |-
              Specification of the groupalertsconfig supporting the following versions:

              - v20241113

              At most one versioned spec can be specified. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status
            properties:
              v20241113:
                description: The spec of the groupalertsconfig resource for version
                  v20241113.
                properties:
                  entry:
                    description: The entry fields of the groupalertsconfig resource
                      spec. These fields can be set for creating and updating groupalertsconfigs.
                    properties:
                      enabled:
                        description: Flag that indicates whether someone enabled this
                          alert configuration for the specified project.
                        type: boolean
                      eventTypeName:
                        description: Event type that triggers an alert.
                        title: Stream Processor Event Types
                        type: string
                      matchers:
                        description: List of rules that determine whether MongoDB
                          Cloud checks an object for the alert configuration.
                        items:
                          description: Rules to apply when comparing a stream processing
                            instance or stream processor against this alert configuration.
                          properties:
                            fieldName:
                              description: Name of the parameter in the target object
                                that MongoDB Cloud checks. The parameter must match
                                all rules for MongoDB Cloud to check for alert configurations.
                              title: Streams Matcher Fields
                              type: string
                            operator:
                              description: Comparison operator to apply when checking
                                the current metric value against **matcher[n].value**.
                              type: string
                            value:
                              description: Value to match or exceed using the specified
                                **matchers.operator**.
                              type: string
                          required:
                          - fieldName
                          - operator
                          - value
                          title: Matchers
                          type: object
                        type: array
                      metricThreshold:
                        description: Threshold for the metric that, when exceeded,
                          triggers an alert. The metric threshold pertains to event
                          types which reflects changes of measurements and metrics
                          about the serverless database.
                        properties:
                          metricName:
                            description: Human-readable label that identifies the
                              metric against which MongoDB Cloud checks the configured
                              **metricThreshold.threshold**.
                            type: string
                          mode:
                            description: MongoDB Cloud computes the current metric
                              value as an average.
                            type: string
                          operator:
                            description: Comparison operator to apply when checking
                              the current metric value.
                            type: string
                          threshold:
                            description: Value of metric that, when exceeded, triggers
                              an alert.
                            type: number
                          units:
                            description: Element used to express the quantity. This
                              can be an element of time, storage capacity, and the
                              like.
                            title: Serverless Metric Units
                            type: string
                        required:
                        - metricName
                        title: Serverless Metric Threshold
                        type: object
                      notifications:
                        description: List that contains the targets that MongoDB Cloud
                          sends notifications.
                        items:
                          description: One target that MongoDB Cloud sends notifications
                            when an alert triggers.
                          properties:
                            apiTokenRef:
                              description: "SENSITIVE FIELD\n\nReference to a secret
                                containing data for the \"apiToken\" field:\n\nSlack
                                API token or Bot token that MongoDB Cloud needs to
                                send alert notifications via Slack. The resource requires
                                this parameter when `\"notifications.[n].typeName\"
                                : \"SLACK\"`. If the token later becomes invalid,
                                MongoDB Cloud sends an email to the project owners.
                                If the token remains invalid, MongoDB Cloud removes
                                the token. \n\n**NOTE**: After you create a notification
                                which requires an API or integration key, the key
                                appears partially redacted when you:\n\n* View or
                                edit the alert through the Atlas UI.\n\n* Query the
                                alert for the notification through the Atlas Administration
                                API."
                              properties:
                                key:
                                  default: apiToken
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "apiToken".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            channelName:
                              description: 'Name of the Slack channel to which MongoDB
                                Cloud sends alert notifications. The resource requires
                                this parameter when `"notifications.[n].typeName"
                                : "SLACK"`.'
                              type: string
                            datadogApiKeyRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "datadogApiKey" field:

                                Datadog API Key that MongoDB Cloud needs to send alert notifications to Datadog. You can find this API key in the Datadog dashboard. The resource requires this parameter when `"notifications.[n].typeName" : "DATADOG"`.

                                **NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:

                                * View or edit the alert through the Atlas UI.

                                * Query the alert for the notification through the Atlas Administration API.
                              properties:
                                key:
                                  default: datadogApiKey
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "datadogApiKey".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            datadogRegion:
                              description: |-
                                Datadog region that indicates which API Uniform Resource Locator (URL) to use. The resource requires this parameter when `"notifications.[n].typeName" : "DATADOG"`.

                                To learn more about Datadog's regions, see <a href="https://docs.datadoghq.com/getting_started/site/" target="_blank" rel="noopener noreferrer">Datadog Sites</a>.
                              type: string
                            delayMin:
                              description: Number of minutes that MongoDB Cloud waits
                                after detecting an alert condition before it sends
                                out the first notification.
                              type: integer
                            emailAddress:
                              description: |-
                                Email address to which MongoDB Cloud sends alert notifications. The resource requires this parameter when `"notifications.[n].typeName" : "EMAIL"`. You don't need to set this value to send emails to individual or groups of MongoDB Cloud users including:

                                - specific MongoDB Cloud users (`"notifications.[n].typeName" : "USER"`)
                                - MongoDB Cloud users with specific project roles (`"notifications.[n].typeName" : "GROUP"`)
                                - MongoDB Cloud users with specific organization roles (`"notifications.[n].typeName" : "ORG"`)
                                - MongoDB Cloud teams (`"notifications.[n].typeName" : "TEAM"`)

                                To send emails to one MongoDB Cloud user or grouping of users, set the `notifications.[n].emailEnabled` parameter.
                              type: string
                            emailEnabled:
                              description: |-
                                Flag that indicates whether MongoDB Cloud should send email notifications. The resource requires this parameter when one of the following values have been set:

                                - `"notifications.[n].typeName" : "ORG"`
                                - `"notifications.[n].typeName" : "GROUP"`
                                - `"notifications.[n].typeName" : "USER"`
                              type: boolean
                            integrationId:
                              description: The id of the associated integration, the
                                credentials of which to use for requests.
                              type: string
                            intervalMin:
                              description: |-
                                Number of minutes to wait between successive notifications. MongoDB Cloud sends notifications until someone acknowledges the unacknowledged alert.

                                PagerDuty, VictorOps, and OpsGenie notifications don't return this element. Configure and manage the notification interval within each of those services.
                              type: integer
                            microsoftTeamsWebhookUrlRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "microsoftTeamsWebhookUrl" field:

                                Microsoft Teams Webhook Uniform Resource Locator (URL) that MongoDB Cloud needs to send this notification via Microsoft Teams. The resource requires this parameter when `"notifications.[n].typeName" : "MICROSOFT_TEAMS"`. If the URL later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.

                                **NOTE**: When you view or edit the alert for a Microsoft Teams notification, the URL appears partially redacted.
                              properties:
                                key:
                                  default: microsoftTeamsWebhookUrl
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "microsoftTeamsWebhookUrl".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            mobileNumber:
                              description: 'Mobile phone number to which MongoDB Cloud
                                sends alert notifications. The resource requires this
                                parameter when `"notifications.[n].typeName" : "SMS"`.'
                              type: string
                            notificationTokenRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "notificationToken" field:

                                HipChat API token that MongoDB Cloud needs to send alert notifications to HipChat. The resource requires this parameter when `"notifications.[n].typeName" : "HIP_CHAT"`". If the token later becomes invalid, MongoDB Cloud sends an email to the project owners. If the token remains invalid, MongoDB Cloud removes it.

                                **NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:

                                * View or edit the alert through the Atlas UI.

                                * Query the alert for the notification through the Atlas Administration API.
                              properties:
                                key:
                                  default: notificationToken
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "notificationToken".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            notifierId:
                              description: The notifierId is a system-generated unique
                                identifier assigned to each notification method. This
                                is needed when updating third-party notifications
                                without requiring explicit authentication credentials.
                              type: string
                            opsGenieApiKeyRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "opsGenieApiKey" field:

                                API Key that MongoDB Cloud needs to send this notification via Opsgenie. The resource requires this parameter when `"notifications.[n].typeName" : "OPS_GENIE"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.

                                **NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:

                                * View or edit the alert through the Atlas UI.

                                * Query the alert for the notification through the Atlas Administration API.
                              properties:
                                key:
                                  default: opsGenieApiKey
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "opsGenieApiKey".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            opsGenieRegion:
                              description: Opsgenie region that indicates which API
                                Uniform Resource Locator (URL) to use.
                              type: string
                            region:
                              description: PagerDuty region that indicates which API
                                Uniform Resource Locator (URL) to use.
                              type: string
                            roles:
                              description: 'List that contains the one or more [organization](https://dochub.mongodb.org/core/atlas-org-roles)
                                or [project roles](https://dochub.mongodb.org/core/atlas-proj-roles)
                                that receive the configured alert. The resource requires
                                this parameter when `"notifications.[n].typeName"
                                : "GROUP"` or `"notifications.[n].typeName" : "ORG"`.
                                If you include this parameter, MongoDB Cloud sends
                                alerts only to users assigned the roles you specify
                                in the array. If you omit this parameter, MongoDB
                                Cloud sends alerts to users assigned any role.'
                              items:
                                description: One organization or project role that
                                  receive the configured alert.
                                type: string
                              type: array
                            roomName:
                              description: 'HipChat API room name to which MongoDB
                                Cloud sends alert notifications. The resource requires
                                this parameter when `"notifications.[n].typeName"
                                : "HIP_CHAT"`".'
                              type: string
                            serviceKeyRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "serviceKey" field:

                                PagerDuty service key that MongoDB Cloud needs to send notifications via PagerDuty. The resource requires this parameter when `"notifications.[n].typeName" : "PAGER_DUTY"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.

                                **NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:

                                * View or edit the alert through the Atlas UI.

                                * Query the alert for the notification through the Atlas Administration API.
                              properties:
                                key:
                                  default: serviceKey
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "serviceKey".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            smsEnabled:
                              description: |-
                                Flag that indicates whether MongoDB Cloud should send text message notifications. The resource requires this parameter when one of the following values have been set:

                                - `"notifications.[n].typeName" : "ORG"`
                                - `"notifications.[n].typeName" : "GROUP"`
                                - `"notifications.[n].typeName" : "USER"`
                              type: boolean
                            teamId:
                              description: 'Unique 24-hexadecimal digit string that
                                identifies one MongoDB Cloud team. The resource requires
                                this parameter when `"notifications.[n].typeName"
                                : "TEAM"`.'
                              type: string
                            teamName:
                              description: 'Name of the MongoDB Cloud team that receives
                                this notification. The resource requires this parameter
                                when `"notifications.[n].typeName" : "TEAM"`.'
                              type: string
                            typeName:
                              description: Human-readable label that displays the
                                alert notification type.
                              type: string
                            username:
                              description: 'MongoDB Cloud username of the person to
                                whom MongoDB Cloud sends notifications. Specify only
                                MongoDB Cloud users who belong to the project that
                                owns the alert configuration. The resource requires
                                this parameter when `"notifications.[n].typeName"
                                : "USER"`.'
                              type: string
                            victorOpsApiKeyRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "victorOpsApiKey" field:

                                API key that MongoDB Cloud needs to send alert notifications to Splunk On-Call. The resource requires this parameter when `"notifications.[n].typeName" : "VICTOR_OPS"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.

                                **NOTE**: After you create a notification which requires an API or integration key, the key appears partially redacted when you:

                                * View or edit the alert through the Atlas UI.

                                * Query the alert for the notification through the Atlas Administration API.
                              properties:
                                key:
                                  default: victorOpsApiKey
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "victorOpsApiKey".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            victorOpsRoutingKeyRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "victorOpsRoutingKey" field:

                                Routing key that MongoDB Cloud needs to send alert notifications to Splunk On-Call. The resource requires this parameter when `"notifications.[n].typeName" : "VICTOR_OPS"`. If the key later becomes invalid, MongoDB Cloud sends an email to the project owners. If the key remains invalid, MongoDB Cloud removes it.
                              properties:
                                key:
                                  default: victorOpsRoutingKey
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "victorOpsRoutingKey".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            webhookSecretRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "webhookSecret" field:

                                Authentication secret for a webhook-based alert.

                                Atlas returns this value if you set `"notifications.[n].typeName" :"WEBHOOK"` and either:
                                * You set `notification.[n].webhookSecret` to a non-empty string
                                * You set a default webhookSecret either on the [Integrations](https://www.mongodb.com/docs/atlas/tutorial/third-party-service-integrations/#std-label-third-party-integrations) page, or with the [Integrations API](#tag/Third-Party-Service-Integrations/operation/createIntegration)

                                **NOTE**: When you view or edit the alert for a webhook notification, the secret appears completely redacted.
                              properties:
                                key:
                                  default: webhookSecret
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "webhookSecret".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                            webhookUrlRef:
                              description: |-
                                SENSITIVE FIELD

                                Reference to a secret containing data for the "webhookUrl" field:

                                Target URL for a webhook-based alert.

                                Atlas returns this value if you set `"notifications.[n].typeName" :"WEBHOOK"` and either:
                                * You set `notification.[n].webhookURL` to a non-empty string
                                * You set a default webhookUrl either on the [Integrations](https://www.mongodb.com/docs/atlas/tutorial/third-party-service-integrations/#std-label-third-party-integrations) page, or with the [Integrations API](#tag/Third-Party-Service-Integrations/operation/createIntegration)

                                **NOTE**: When you view or edit the alert for a Webhook URL notification, the URL appears partially redacted.
                              properties:
                                key:
                                  default: webhookUrl
                                  description: Key of the secret data containing the
                                    sensitive field value, defaults to "webhookUrl".
                                  type: string
                                name:
                                  description: Name of the secret containing the sensitive
                                    field value.
                                  type: string
                              type: object
                          type: object
                        type: array
                      threshold:
                        description: A Limit that triggers an alert when greater than
                          a number.
                        properties:
                          operator:
                            description: Comparison operator to apply when checking
                              the current metric value.
                            type: string
                          threshold:
                            description: Value of metric that, when exceeded, triggers
                              an alert.
                            type: integer
                          units:
                            description: Element used to express the quantity. This
                              can be an element of time, storage capacity, and the
                              like.
                            title: Raw Metric Units
                            type: string
                        title: Greater Than Raw Threshold
                        type: object
                    type: object
                  parameters:
                    description: The parameter fields of the groupalertsconfig resource
                      spec. These fields are used when creating groupalertsconfigs
                      only.
                    properties:
                      groupId:
                        description: |-
                          Unique 24-hexadecimal digit string that identifies your project. Use the [/groups](#tag/Projects/operation/listProjects) endpoint to retrieve all projects to which the authenticated user has access.

                          **NOTE**: Groups and projects are synonymous terms. Your group id is the same as your project id. For existing groups, your group/project id remains the same. The resource and corresponding endpoints use the term groups.
                        type: string
                    type: object
                type: object
            type: object
          status:
            description: 'Most recently observed read-only status of the groupalertsconfig
              for the specified resource version. This data may not be up to date
              and is populated by the system. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status'
            properties:
              conditions:
                description: Represents the latest available observations of a resource's
                  current state.
                items:
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status
                        to another.
                      format: date-time
                      type: string
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon.
                      type: integer
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition.
                      type: string
                  required:
                  - type
                  - status
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              v20241113:
                description: The last observed Atlas state of the groupalertsconfig
                  resource for version v20241113.
                properties:
                  created:
                    description: Date and time when MongoDB Cloud created the alert
                      configuration. This parameter expresses its value in the <a
                      href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank"
                      rel="noopener noreferrer">ISO 8601</a> timestamp format in UTC.
                    type: string
                  groupId:
                    description: Unique 24-hexadecimal digit string that identifies
                      the project that owns this alert configuration.
                    type: string
                  id:
                    description: Unique 24-hexadecimal digit string that identifies
                      this alert configuration.
                    type: string
                  updated:
                    description: Date and time when someone last updated this alert
                      configuration. This parameter expresses its value in the <a
                      href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank"
                      rel="noopener noreferrer">ISO 8601</a> timestamp format in UTC.
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions:
  - v1

